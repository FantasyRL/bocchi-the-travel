import{_ as g,c as h,b as t,a as r,j as a,t as l,w as d,d as k,v as C,F as y,a7 as $,f as _,g as w,a4 as x,r as c,o as p,z as O,A as T,W as I,u as S,C as B,p as E,k as N}from"./index-DpGD7IeN.js";import{C as V,H as z,P as D,E as j}from"./PlayCircleOutlined-jjyjDVot.js";const n=s=>(E("data-v-13d5b0e8"),s=s(),N(),s),F={class:"travels"},H={class:"info"},P={class:"card"},A=$('<div class="tools" data-v-13d5b0e8><div class="circle" data-v-13d5b0e8><span class="red box" data-v-13d5b0e8></span></div><div class="circle" data-v-13d5b0e8><span class="yellow box" data-v-13d5b0e8></span></div><div class="circle" data-v-13d5b0e8><span class="green box" data-v-13d5b0e8></span></div></div>',1),L={class:"card__content"},Q={class:"party_info"},W={class:"title"},q=n(()=>t("text",{class:"info_name"},"活动名:",-1)),G=n(()=>t("br",null,null,-1)),J={class:"title"},K=n(()=>t("text",{class:"info_name"},"创建者:",-1)),M=n(()=>t("br",null,null,-1)),R={class:"title"},U=n(()=>t("text",{class:"info_name"},"成员数:",-1)),X=n(()=>t("br",null,null,-1)),Y={class:"content"},Z=n(()=>t("text",{class:"content_text"},"介绍:",-1)),tt=n(()=>t("br",null,null,-1)),et=n(()=>t("br",null,null,-1)),st={style:{"text-align":"center","margin-top":"10px","margin-bottom":"10px"}},nt={style:{"text-align":"center","margin-top":"10px","margin-bottom":"10px"}},ot=n(()=>t("div",{class:"center"},[t("text",null,"所有计划")],-1)),it={class:"sty"},at=n(()=>t("br",null,null,-1)),lt=n(()=>t("br",null,null,-1)),rt=n(()=>t("br",null,null,-1)),dt={style:{"border-radius":"12px",border:"3px solid #f5f5f5",width:"fit-content","margin-top":"5px"}},ct={class:"foot"},ut={class:"create"},_t=n(()=>t("br",null,null,-1)),pt=n(()=>t("br",null,null,-1)),ht=n(()=>t("br",null,null,-1)),mt=n(()=>t("br",null,null,-1)),yt=n(()=>t("br",null,null,-1)),bt=n(()=>t("br",null,null,-1)),vt=n(()=>t("br",null,null,-1)),ft=n(()=>t("br",null,null,-1)),gt={data(){return{partynull:0,id:1,infodata:{},items:[]}},methods:{ToEnd(){_.get("https://api.xiey.work/bocchi/party/status?party_id="+this.id+"&action_type=1",{headers:{"access-token":this.access_token}}),this.$router.push(`/finish/${this.id}`)},Tomember(){this.$router.push(`/member/${this.id}`)},tomerplan(){this.$router.push(`/merplan/${this.id}`)},tocreate(){this.$router.push(`/Createplan/${this.id}`)},tomyitinerarys(){this.$router.push(`/myitinerarys/${this.id}`)},apply_party(){_.get("/bocchi/party/apply?party_id="+this.id,{headers:{"access-token":this.access_token}}).then(s=>{console.log(s),alert("申请成功！")}).catch(s=>{console.error(s)})},getin(){_.get("https://api.xiey.work/bocchi/party/itinerary/show?party_id="+this.id,{headers:{"access-token":this.access_token}}).then(s=>{console.log(s),this.items=s.data.itineraries,console.log(s.data.itineraries),s.data.itineraries===void 0&&(this.partynull=1)}).catch(s=>{console.error(s)})},partyinit(){const s="https://api.xiey.work/bocchi/party/get?party_id="+this.id,e={};_.get(s,e).then(o=>{console.log(o),this.infodata=o.data.party}).catch(o=>{console.error(o)})}},mounted(){console.log(this.$router),this.id=this.$route.params.id,this.access_token=w.get("access_token"),this.partyinit(),this.getin()},computed:{getIcon(){return s=>{switch(s){case 1:return j;case 2:return D;case 3:return z;case 4:return V;case 5:return x}}},getType(){return s=>{switch(s){case 1:return"路线";case 2:return"活动";case 3:return"住宿";case 4:return"餐饮";case 5:return"其他";default:return"未知类型"}}}}},kt=Object.assign(gt,{__name:"party",setup(s){return(e,o)=>{const b=c("a-page-header"),u=c("a-button"),m=c("a-timeline-item"),v=c("a-timeline"),f=c("a-empty");return p(),h(y,null,[t("div",F,[r(b,{style:{border:"1px solid rgb(235, 237, 240)"},title:"活动详情",onBack:o[0]||(o[0]=()=>e.$router.go(-1))})]),t("div",H,[t("div",P,[A,t("div",L,[t("div",Q,[t("div",W,[q,G,a(l(e.infodata.title),1)]),t("div",J,[K,M,a(l(e.infodata.founder_id),1)]),t("div",R,[U,X,a(l(e.infodata.member_count),1)])]),t("div",Y,[Z,tt,a('[本活动于"'+l(e.infodata.province)+","+l(e.infodata.city)+'"处进行] ',1),et,a(l(e.infodata.content),1)]),t("div",st," 起止时间:"+l(e.infodata.start_time)+" - "+l(e.infodata.end_time),1),t("div",nt,[r(u,{type:"dashed",onClick:o[1]||(o[1]=i=>e.apply_party())},{default:d(()=>[a("申请加入")]),_:1}),r(u,{style:{"margin-left":"10px"},onClick:o[2]||(o[2]=i=>e.Tomember())},{default:d(()=>[a("查看成员")]),_:1}),r(u,{type:"primary",onClick:o[3]||(o[3]=i=>e.ToEnd()),style:{"margin-left":"10px"}},{default:d(()=>[a("结束行程")]),_:1})])])]),ot,t("div",it,[r(v,null,{default:d(()=>[(p(!0),h(y,null,O(e.items,i=>(p(),h("div",{key:i.id},[r(m,null,{dot:d(()=>[(p(),T(I(e.getIcon(i.action_type)),{style:{"font-size":"16px"}}))]),default:d(()=>[a(" 计划: "+l(i.title)+" ",1),at,a(" 类型："+l(e.getType(i.action_type))+" ",1),lt,a(" 内容："+l(i.remark)+" ",1),rt,a(" 时间："+l(i.schedule_start_time),1)]),_:2},1024),r(m,null,{dot:d(()=>[r(S(B),{style:{"font-size":"16px"}})]),default:d(()=>[a(" 结束时间: "+l(i.schedule_end_time)+" ",1),t("div",dt,[r(u,{type:"link",onClick:Ct=>e.$router.push("/itinerarys/"+i.id)},{default:d(()=>[a(" 查看详细 ")]),_:2},1032,["onClick"])])]),_:2},1024)]))),128))]),_:1})]),k(t("div",null,[r(f)],512),[[C,e.partynull]])]),t("div",ct,[t("div",ut,[t("button",{class:"btn",onClick:o[4]||(o[4]=(...i)=>e.tocreate&&e.tocreate(...i))},"创建计划"),_t,t("button",{class:"btn",onClick:o[5]||(o[5]=(...i)=>e.tomyitinerarys&&e.tomyitinerarys(...i))},"查看撰写过的计划"),pt,t("button",{class:"btn",onClick:o[6]||(o[6]=(...i)=>e.tomerplan&&e.tomerplan(...i))},"待通过计划")])]),ht,mt,yt,bt,vt,ft],64)}}}),xt=g(kt,[["__scopeId","data-v-13d5b0e8"]]);export{xt as default};
